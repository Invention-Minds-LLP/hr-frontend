<div class="card">
    
    <h2 class="heading">Absent Without Leave</h2>

    <!-- Calendar + Button -->
    <div class="flex align-items-center justify-content-end gap-3 mt-3">
        <p-datepicker 
            [(ngModel)]="selectedDate" 
            dateFormat="yy-mm-dd"
            [showIcon]="true"
            class="bg-white border-round-sm"
            (onSelect)="loadAbsent()">
        </p-datepicker>
    </div>

    <!-- Table -->
    <p-table [value]="absentList" class="mt-3" [paginator]="true" [rows]="10" responsiveLayout="scroll" [loading]="loading">
        <ng-template pTemplate="header">
            <tr>
                <th>No</th>
                <th>Employee Code</th>
                <th>Name</th>
                <th>Department</th>
                <th>Date</th>
                <th>Shift</th>
                <th>Status</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row let-rowIndex="rowIndex">
            <tr>
                <td>{{ rowIndex + 1 }}</td>
                <td>{{ row.employeeCode }}</td>
                <td>{{ row.name }}</td>
                <td class="t-data al">
                    <span class="dept-badge" [ngStyle]="{
                      backgroundColor: getDepartmentColors(row.departmentId).badgeColor}">
                      <span class="dot" [ngStyle]="{
                        backgroundColor: getDepartmentColors(row.departmentId).dotColor}"></span>
                      {{ getDepartmentName(row.departmentId) }}
                    </span>
                  </td>
      
                <td>{{ row.date | date:'dd/MM/yyyy' }}</td>
                <td>
                        {{ row.shiftStartTime | date:'HH:mm' }} -
                        {{ row.shiftEndTime | date:'HH:mm' }}
                </td>
                <td>
                    <span class="status-badge absent">Absent</span>
                </td>
            </tr>
        </ng-template>
    </p-table>

</div>
