<div class="question-bank">
  <div class="header">

    <h2>My Assigned Tests <span><i class="pi pi-info-circle info-icon"
          pTooltip="Access all tests and assessments allocated to you. Review pending, ongoing, and completed test details."
          tooltipPosition="top"></i></span></h2>
  </div>
  <ng-container *ngIf="loading; else test">
    <p-table [value]="[1, 2, 3, 4, 5]" [scrollable]="true" scrollHeight="600px">
      <!-- Header -->
      <ng-template pTemplate="header">
        <tr>
          <th *ngFor="let h of ['No','Test Name','Duration','Status','Assigned On','Action']">
            {{ h }}
          </th>
        </tr>
      </ng-template>

      <!-- Body -->
      <ng-template pTemplate="body">
        <tr>
          <td><p-skeleton width="2rem" height="1.2rem"></p-skeleton></td>

          <!-- <td>
                            <div class="profile-skeleton">
                                <p-skeleton shape="circle" size="3rem" styleClass="profile-avatar"></p-skeleton>
                                <div class="profile-text">
                                    <p-skeleton width="90px" height="12px" styleClass="mb-1"></p-skeleton>
                                    <p-skeleton width="60px" height="10px"></p-skeleton>
                                </div>
                            </div>
                        </td> -->

          <td><p-skeleton width="70px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="90px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="100px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="60px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="80px" height="1.5rem"></p-skeleton></td>
          <!-- <td><p-skeleton width="100px" height="1.5rem"></p-skeleton></td> -->
          <!-- <td><p-skeleton width="60px" height="1.5rem"></p-skeleton></td> -->
          <!-- <td><p-skeleton width="80px" height="1.5rem"></p-skeleton></td> -->
        </tr>
      </ng-template>
    </p-table>
  </ng-container>
<ng-template #test>
  <p-table [value]="tests" [paginator]="true" [rows]="5" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>No</th>
        <th>Test Name</th>
        <th>Duration</th>
        <th>Status</th>
        <th>Assigned On</th>
        <th style="text-align: center;">Action</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-t let-i="rowIndex">
      <tr>
        <td>{{ i + 1}}</td>
        <td>{{ t.test?.name }}</td>
        <td>{{ t.test?.duration }} min</td>
        <td>{{ t.status }}</td>
        <td>{{ t.assignedAt | date:'short' }}</td>
        <td class="action-cell">
          <ng-container *ngIf="t.canStart; else maxMsg">
            <button class="button" (click)="startTest(t)">Start</button>
          </ng-container>
          <ng-template #maxMsg>
            <span class="disabled-msg">Max attempts reached</span>
          </ng-template>
        </td>

      </tr>
    </ng-template>
  </p-table>
</ng-template>
</div>