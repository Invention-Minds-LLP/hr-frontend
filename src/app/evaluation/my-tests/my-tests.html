<!-- <div class="question-bank">
  <div class="header">

    <h2>My Assigned Tests <span><i class="pi pi-info-circle info-icon"
          pTooltip="Access all tests and assessments allocated to you. Review pending, ongoing, and completed test details."
          tooltipPosition="top"></i></span></h2>
  </div>
  <ng-container *ngIf="loading; else test">
    <p-table [value]="[1, 2, 3, 4, 5]" [scrollable]="true" scrollHeight="600px">
      <ng-template pTemplate="header">
        <tr>
          <th *ngFor="let h of ['No','Test Name','Duration','Status','Assigned On','Action']">
            {{ h }}
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body">
        <tr>
          <td><p-skeleton width="2rem" height="1.2rem"></p-skeleton></td>

           <td>
                            <div class="profile-skeleton">
                                <p-skeleton shape="circle" size="3rem" styleClass="profile-avatar"></p-skeleton>
                                <div class="profile-text">
                                    <p-skeleton width="90px" height="12px" styleClass="mb-1"></p-skeleton>
                                    <p-skeleton width="60px" height="10px"></p-skeleton>
                                </div>
                            </div>
                        </td> 

          <td><p-skeleton width="70px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="90px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="100px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="60px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="80px" height="1.5rem"></p-skeleton></td>
          <td><p-skeleton width="100px" height="1.5rem"></p-skeleton></td> 
          <td><p-skeleton width="60px" height="1.5rem"></p-skeleton></td>
           <td><p-skeleton width="80px" height="1.5rem"></p-skeleton></td>
        </tr>
      </ng-template>
    </p-table>
  </ng-container>
<ng-template #test>
  <p-table [value]="tests" [paginator]="true" [rows]="5" responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>No</th>
        <th>Test Name</th>
        <th>Duration</th>
        <th>Status</th>
        <th>Assigned On</th>
        <th style="text-align: center;">Action</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-t let-i="rowIndex">
      <tr>
        <td>{{ i + 1}}</td>
        <td>{{ t.test?.name }}</td>
        <td>{{ t.test?.duration }} min</td>
        <td>{{ t.status }}</td>
        <td>{{ t.assignedAt | date:'short' }}</td>
        <td class="action-cell">
          <ng-container *ngIf="t.canStart; else maxMsg">
            <button class="button" (click)="startTest(t)">Start</button>
          </ng-container>
          <ng-template #maxMsg>
            <span class="disabled-msg">Max attempts reached</span>
          </ng-template>
        </td>

      </tr>
    </ng-template>
  </p-table>
</ng-template>
</div> -->
<div class="question-bank">

  <div class="header">
    <h2>
      My Assigned Tests
      <span>
        <i class="pi pi-info-circle info-icon"
           pTooltip="List of tests assigned to you along with their status, duration and deadlines.">
        </i>
      </span>
    </h2>
  </div>

  <!-- SKELETON LOADER -->
  <ng-container *ngIf="loading; else tableContent">
    <table class="custom-table">
      <thead>
        <tr>
          <th>No</th>
          <th>Test Name</th>
          <th>Duration</th>
          <th>Status</th>
          <th>Assigned On</th>
          <th>Test Date</th>
          <th>Deadline Date</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let s of [1,2,3,4,5,6,7,8]">
          <td><div class="skeleton w-40"></div></td>
          <td><div class="skeleton w-100"></div></td>
          <td><div class="skeleton w-80"></div></td>
          <td><div class="skeleton w-120"></div></td>
          <td><div class="skeleton w-150"></div></td>
          <td><div class="skeleton w-120"></div></td>
          <td><div class="skeleton w-120"></div></td>
          <td><div class="skeleton w-80"></div></td>

        </tr>
      </tbody>
    </table>
  </ng-container>

  <!-- MAIN TABLE -->
  <ng-template #tableContent>
    <div class="table-container">
      <table class="custom-table">
        <thead>
          <tr>
            <th>No.</th>
            <th>Test Name</th>
            <th>Duration</th>
            <th>Status</th>
            <th>Assigned On</th>
            <th>Test Date</th>
            <th>Deadline Date</th>
            <th>Attempts</th>
            <th style="text-align: center;">Action</th>
          </tr>
        </thead>
  
        <tbody>
          <tr *ngFor="let t of tests; let i = index">
            <td>{{ (i + 1) }}</td>
            <td>{{ t.test?.name }}</td>
            <td>{{ t.test?.duration }} Min</td>
            <td>{{ t.status }}</td>

            <td>{{ t.assignedAt | date:'short' }}</td>
            <td>
              <ng-container *ngIf="t.testDate; else noDate">
                {{ t.testDate | date:'short' }}
              </ng-container>
              <ng-template #noDate>-</ng-template>
            </td>
            <td>
              <ng-container *ngIf="t.deadlineDate; else noDeadline">
                {{ t.deadlineDate | date:'short' }}
              </ng-container>
              <ng-template #noDeadline>-</ng-template>
            </td>
            <td>{{ t.attempts }}/{{ t.test?.maxAttempts }}</td>

            <td class="action-cell">
              <button *ngIf="t.canStart; else maxMsg" class="button" (click)="startTest(t)">
                Start
              </button>
  
              <ng-template #maxMsg>
                <span class="disabled-msg">Max attempts reached</span>
              </ng-template>
            </td>
          </tr>
          <tr *ngIf="tests.length === 0">
            <td colspan="6" class="no-data center-right">
              No tests assigned.
            </td>
        </tbody>
      </table>
    </div>

    <!-- PAGINATION -->
    <!-- <div class="custom-paginator">
      <button (click)="prevPage()" [disabled]="currentPage === 1">‹</button>

      <button
        *ngFor="let p of totalPagesArray"
        (click)="changePage(p)"
        [class.active]="p === currentPage">
        {{ p }}
      </button>

      <button (click)="nextPage()" [disabled]="currentPage === totalPages">›</button>
    </div> -->
  </ng-template>

</div>
